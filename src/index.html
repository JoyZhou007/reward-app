<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>RewardApp</title>
  <base href="/">

  <!--<meta name="viewport" content="width=device-width, initial-scale=1">-->
  <meta id="viewport" name="viewport"
        content="width=device-width; initial-scale=1.0; maximum-scale=1; user-scalable=no;">
  <link rel="icon" type="image/x-icon" href="favicon.ico">
  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#1976d2">
  <link rel="stylesheet" href="assets/icomoon/style.css">
  <link rel="stylesheet" type="text/css" href="assets/font-icon/iconfont.css">
</head>
<body>
<app-root></app-root>

<script type="text/javascript" src="//res.wx.qq.com/open/js/jweixin-1.0.0.js"></script>
<script src="browser.min.js"></script>
<script>
  (function () {
    let html = document.documentElement;

    function onWindowResize() {
      html.style.fontSize = html.getBoundingClientRect().width / 10 + 'px';
    }

    //采用节流实现限制回调函数调用频率
    function ttrottle(fn, time) {
      let isNeedInvoke = true;
      return function (...args) {
        if (!isNeedInvoke) return;
        let context = this;
        let _arguments = args;
        isNeedInvoke = false;
        setTimeout(() => {
          fn.apply(context, _arguments);
          isNeedInvoke = true;
        }, time);
      };
    };

    window.onresize = ttrottle(onWindowResize, 500);

    // window.addEventListener('resize', onWindowResize);
    onWindowResize();


  })();

</script>

<script>
  //分享
  // const shareData = {
  //   title: "我的钢铁网Mysteel会议中心",
  //   desc: "最全的大宗商品领域会议信息，支持在线报名支付，参会从未如此便捷",
  //   link: "https://m.mysteel.com/huizhan/index.htm",//分享链接，按需求修改
  //   imgUrl: 'https://www.steelphone.com/2016/mysteel_calculator/images/logo.jpg'//分享图标，按需求修改
  // };
  // wx.ready(function () {
  //   wx.onMenuShareAppMessage(shareData);
  //   wx.onMenuShareTimeline(shareData);
  //   wx.onMenuShareQQ(shareData);
  // });
</script>

<!-- *手机版后台分享*-->
<script type="text/javascript">
  if (window.mysteeljs || window.webkit) {
    const id = "";//分享id
    const type = "19";//分享类型
    const title = "会议中心";//分享标题按
    const desc = "最全的大宗商品领域会议信息，支持在线报名支付，参会从未如此便捷";//分享描述
    const link = "https://m.mysteel.com/huizhan/index.htm";//分享链接
    const imgUrl = 'https://m.steelphone.com/share.png';//分享图标

    if (window.mysteeljs) {
      window.mysteeljs && window.mysteeljs.hideShareMenu(false);
      window.mysteeljs.share(title, desc, link, imgUrl, id, type);
    }
    else if (window.webkit.messageHandlers && window.webkit.messageHandlers && window.webkit.messageHandlers.hideShareMenu) {
      window.webkit.messageHandlers.hideShareMenu.postMessage("false");
      const shareData = [title, desc, link, imgUrl, id, type];
      window.webkit.messageHandlers.share.postMessage(shareData);
    }
  }

</script>

<script>
  //接收来自ios端的用户数据
  var getUserInfo = function (data) {
    let userData = JSON.parse(data);
    console.log('userData index', userData)

    if (userData && userData.userId && userData.encCellphone) {
      console.log('已登录 window');
      window.localStorage.setItem('userId', userData.userId);
    } else {
      console.log('未登录','window.local',window.localStorage.getItem('doLogin'));
      window.localStorage.setItem('userId', '');
      if ( window.localStorage.getItem('doLogin') === '1'){
        window['webkit'].messageHandlers.getUserInfo.postMessage('true');
      }
    }
  }
</script>
</body>
</html>
