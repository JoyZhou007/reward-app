<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>悬赏问答</title>
  <base href="/">

  <!--<meta name="viewport" content="width=device-width, initial-scale=1">-->
  <meta id="viewport" name="viewport"
        content="width=device-width; initial-scale=1.0; maximum-scale=1; user-scalable=no;">
  <!--<link rel="icon" type="image/x-icon" href="favicon.ico">-->
  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#1976d2">
  <link rel="stylesheet" href="assets/icomoon/style.css">
  <link rel="stylesheet" type="text/css" href="assets/font-icon/iconfont.css">
</head>
<body>
<app-root></app-root>

<script type="text/javascript" src="//res.wx.qq.com/open/js/jweixin-1.0.0.js"></script>
<script>
  let html = document.documentElement;
  // (function () {
  //   let html = document.documentElement;
  //
  //   function onWindowResize() {
  //     html.style.fontSize = html.getBoundingClientRect().width / 10 + 'px';
  //   }
  //
  //   //采用节流实现限制回调函数调用频率
  //   function ttrottle(fn, time) {
  //     let isNeedInvoke = true;
  //     return function (...args) {
  //       if (!isNeedInvoke) return;
  //       let context = this;
  //       let _arguments = args;
  //       isNeedInvoke = false;
  //       setTimeout(() => {
  //         fn.apply(context, _arguments);
  //         isNeedInvoke = true;
  //       }, time);
  //     };
  //   };
  //
  //   // window.onresize = ttrottle(onWindowResize, 500);
  //
  //   window.addEventListener('resize', onWindowResize);
  //   onWindowResize();
  //
  //
  // })();


  (function (doc, win) {
    let docEl = doc.documentElement,
      resizeEvt = 'orientationchange' in window ? 'orientationchange' : 'resize',
      recalc = function () {
        let clientWidth = docEl.clientWidth;
        if (!clientWidth) return;
        if (clientWidth >= 640) {
          docEl.style.fontSize = '100px';
        } else {
          docEl.style.fontSize = (clientWidth / 10) + 'px';
        }
      };

    if (!doc.addEventListener) return;
    win.addEventListener(resizeEvt, recalc, false);
    doc.addEventListener('DOMContentLoaded', recalc, false);
  })(document, window);


</script>



<!-- *手机版后台分享*-->
<script type="text/javascript">

</script>

<script>
  //接收来自ios端的用户数据
  var getUserInfo = function (data) {
    let userData = JSON.parse(data);
    console.log('userData index', userData)

    if (userData && userData.userId && userData.encCellphone) {
      console.log('已登录 window');
      window.localStorage.setItem('userId', userData.userId);
    } else {
      console.log('未登录', 'window.local', window.localStorage.getItem('doLogin'));
      window.localStorage.setItem('userId', '');
      if (window.localStorage.getItem('doLogin') === '1') {
        window['webkit'].messageHandlers.getUserInfo.postMessage('true');
      }
    }
  }
</script>
</body>
</html>
